<h2 class="dashboard-title">¡Hola {{currentUser?.name}}!</h2>
<div class="card">
    <div class="card-body">
        <form class="w-100" novalidate [formGroup]="userForm" (ngSubmit)="handleUser()">
            <div class="row w-100 mx-0 mb-sm-3">
                <div class="col-sm mb-3 mb-sm-0">
                    <label for="name" class="form-label">Nombre <span *ngIf="userForm.get('name')?.hasError('required') && userForm.get('name')?.touched" class="ba-error">* Campo nombre requerido</span></label>
                    <input type="text" class="form-control" id="name" name="name" formControlName="name" placeholder="Tu nombre">
                </div>
                <div class="col-sm mb-3 mb-sm-0">
                    <label for="lastname" class="form-label">Apellido <span *ngIf="userForm.get('lastname')?.hasError('required') && userForm.get('lastname')?.touched" class="ba-error">* Campo apellido requerido</span></label>
                    <input type="text" class="form-control" id="lastname" name="lastname" formControlName="lastname" placeholder="Tu apellido">
                </div>
            </div>
            <div class="row w-100 mx-0 mb-sm-3">
                <div class="col-sm mb-3 mb-sm-0">
                    <label for="email" class="form-label">Email 
                        <span *ngIf="userForm.get('email')?.hasError('required') && userForm.get('email')?.touched; else elseEmail" class="ba-error">* Campo email requerido</span>
                        <ng-template #elseEmail><span *ngIf="userForm.get('email')?.hasError('email') && userForm.get('email')?.touched" class="ba-error">* Email no válido</span>
                        </ng-template>
                    </label>
                    <input type="email" class="form-control" id="email" name="email" formControlName="email" placeholder="Tu email">
                </div>
                <div class="col-sm mb-3 mb-sm-0">
                    <label for="role" class="form-label">Rol <span *ngIf="userForm.get('role')?.hasError('required') && userForm.get('role')?.touched" class="ba-error">* Campo rol requerido</span></label>
                    <select type="text" class="form-control" id="role" name="role"formControlName="role" placeholder="Tu rol">
                        <option value="admin">Administrador</option>
                        <option value="editor">Editor</option>
                    </select>
                </div>
            </div>
            <div *ngIf="!allowEdit" class="row w-100 mx-0">
                <div class="col-sm mb-3 mb-sm-0 d-flex justify-content-center justify-content-sm-end">
                    <a  (click)="setAllowEdit()" class="button">Editar Perfil</a>
                </div>
            </div>
            <div *ngIf="allowEdit" class="row w-100 mx-0">
                <div class="col-sm mb-3 mb-sm-0 d-flex justify-content-end">
                    <button type="submit">Guardar</button>
                </div>
                <div class="col-sm mb-3 mb-sm-0 d-flex justify-content-center justify-content-sm-start">
                    <a (click)="setAllowEdit()" class="button button-invert">Cancelar</a>
                </div>
            </div>
        </form>
    </div>
  </div>